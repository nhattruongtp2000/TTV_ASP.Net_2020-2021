@model IEnumerable<ViewModel.ViewModels.ProductVm>
@using X.PagedList
@using X.PagedList.Mvc.Core

<!DOCTYPE html>
<!--
    FILTER MAINnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn
    Twitter: https://twitter.com/freshdesignweb
    URL: https://www.freshdesignweb.com/ustora/
-->
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Shop Page- Ustora Demo</title>

    <!-- Google Fonts -->
    <link href='https://fonts.googleapis.com/css?family=Titillium+Web:400,200,300,700,600' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Raleway:400,100' rel='stylesheet' type='text/css'>


</head>
<body>

    <div class="product-big-title-area">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="product-bit-title text-center">
                        <h2>Shop</h2>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-4 mt-5">
            <div data-role="page">
                <div data-role="main" class="ui-content">

                    <div>

                    </div>
                    <div data-role="rangeslider">
                        <label for="pricemin">Price:</label>
                        <input type="range" name="pricemin" id="pricemin" value="0" min="0" max="1000" />
                        <p>Price Min: <span id="demo1"></span></p>
                        <label for="pricemax">Price:</label>
                        <input type="range" name="pricemax" id="pricemax" value="0" min="0" max="20000000" />
                        <p>Price Max: <span id="demo2"></span></p>
                    </div>
                    <div class="row">
                        <div class="col-sm-4">
                            <a id="loai" onclick="myfunction()" class="btn loai" data-id="1">Samsung</a>
                        </div>
                        <div class="col-sm-4">
                            <a id="loai" onclick="myfunction()" class="btn loai" data-id="2">Dell</a>
                        </div>
                        <div class="col-sm-4">
                            <a id="loai" class="btn loai" data-id="3">Apple</a>
                        </div>
                        <div class="col-sm-4">
                            <a id="loai" class="btn loai" data-id="4">Asus</a>
                        </div>
                        <div class="col-sm-4">
                            <a id="loai" class="btn loai " data-id="5">LG</a>
                        </div>
                        <div class="col-sm-4">
                            <a id="loai" class="btn loai" data-id="6">Lenovo</a>
                        </div>
                    </div>
                    <input type="submit" id="test" data-inline="true" value="Submit" />

                </div>
            </div>

            <div style="margin-top:40px">
                <h3><i class="fa fa-list"></i>  Category</h3>
                <ul class="list-group">
                    <li class="list-group-item active">
                        <a href="#" style="text-decoration:none;color:black">Laptop</a>
                    </li>
                    <li class="list-group-item">
                        <a href="#" style="text-decoration: none; color: black">Phone</a>
                    </li>
                    <li class="list-group-item">
                        <a href="#" style="text-decoration: none; color: black">Headphone</a>
                    </li>
                    <li class="list-group-item">
                        <a href="#" style="text-decoration: none; color: black">PC</a>
                    </li>
                    <li class="list-group-item">
                        <a href="#" style="text-decoration: none; color: black">Mouse</a>
                    </li>
                </ul>
            </div>

            <div style="margin-top:40px">
                <h3><i class="fa fa-laptop"></i>  Brand</h3>
                <ul class="list-group">
                    <li class="list-group-item ">
                        <a href="#" style="text-decoration: none; color: black">Samsung</a>
                    </li>
                    <li class="list-group-item">
                        <a href="#" style="text-decoration: none; color: black">Dell</a>
                    </li>
                    <li class="list-group-item">
                        <a href="#" style="text-decoration: none; color: black">Apple</a>
                    </li>
                    <li class="list-group-item">
                        <a href="#" style="text-decoration: none; color: black">Asus</a>
                    </li>
                    <li class="list-group-item">
                        <a href="#" style="text-decoration: none; color: black">LG</a>
                    </li>
                    <li class="list-group-item">
                        <a href="#" style="text-decoration: none; color: black">Lenovo</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="single-product-area col-sm-8">
            <div class="zigzag-bottom"></div>
            <div class="container">
                <div class="row">
                    <!---->
                    @foreach (var item in Model)
                    {
                        var a = (int)item.Price;
                        string res = a.ToString("#,##0");
                        <div class="col-sm-3 ml-2">
                            <div class="single-shop-product">
                                <div class="product-upper">
                                    <img style="height:180px;width:140px" src="~/@item.PhotoReview" alt="">
                                </div>
                                <h2><a href="">@item.ProductName</a></h2>
                                <div class="product-carousel-price">
                                    <ins>@res</ins> <label>VND</label>
                                </div>

                                <div class="product-option-shop">
                                    <a  class="add-to-cart-link test btn btn-primary" data-IdProduct=@item.IdProduct>Add to cart</a>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <div class="product-pagination text-center">
                @Html.PagedListPager((IPagedList)Model, page => Url.Action("GetAllProduct", new { page = page }),
    new X.PagedList.Mvc.Common.PagedListRenderOptionsBase
    {
        LiElementClasses = new string[] { "page-item" },
        PageClasses = new string[] { "page-link" }

    })
            </div>
        </div>
    </div>

    <!-- Latest jQuery form server -->
    <script src="https://code.jquery.com/jquery.min.js"></script>
    <!-- Bootstrap JS form CDN -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

    <!-- jQuery sticky menu -->
    <script src="/js/owl.carousel.min.js"></script>
    <script src="/js/jquery.sticky.js"></script>

    <!-- jQuery easing -->
    <script src="/js/jquery.easing.1.3.min.js"></script>

    <!-- Main Script -->
    <script src="/js/main.js"></script>
</body>
</html>

@section Scripts{
    <script>
        var slider1 = document.getElementById('pricemin');
        var slider2 = document.getElementById('pricemax');


        var output1 = document.getElementById("demo1")
        var output2 = document.getElementById("demo2")



        slider1.oninput = function () {
            var x = parseInt(this.value);
            output1.innerHTML = x.toLocaleString();
        }

        slider2.oninput = function () {
            var x = parseInt(this.value);
            output2.innerHTML = x.toLocaleString();
        }

        var id = [];
        var i = 0;

        $(".loai").click(function () {
            if ($(this).hasClass("loai")) {
                $(this).removeClass("loai");
                $(this).addClass("checkk");
                id[i] = $(this).attr("data-id");
                i++;
            }
            else {
                var value = $(this).attr("data-id");
                var index = id.indexOf(value);
                i--;
                id.splice(index, 1);
                $(this).removeClass("check");
                $(this).addClass("loai");


            }

        });
    </script>
    <script>
    $("#test").click(function () {
            var IdBrand1 = id[0];
            var IdBrand2 = id[1];
            var IdBrand3 = id[2];
            var IdBrand4 = id[3];
            var IdBrand5 = id[4];
            var IdBrand6 = id[5];
            var pricemin = $("#demo1").text();
            //bỏ đi dấu phẩy ở trong string
            var cleanstring1 = pricemin.replace(/[^\d\.\-\ ]/g, '');
            var pricemax = $("#demo2").text();
            //bỏ đi dấu phẩy ở trong string
            var cleanstring2 = pricemax.replace(/[^\d\.\-\ ]/g, '');
            $.ajax({
                type: "POST",
                url:'/Products/GetProductPerMutilpleBrandWithCategory',
                data: {
                    IdCategory: 0,
                    IdBrand1: IdBrand1,
                    IdBrand2: IdBrand2,
                    IdBrand3: IdBrand3,
                    IdBrand4: IdBrand4,
                    IdBrand5: IdBrand5,
                    IdBrand6: IdBrand6,
                    pricemin: cleanstring1,
                    pricemax: cleanstring2,
                    page:1
                },
                success: function (x) {
                    $(".single-product-area").html(x);
                }
            });

        });
    </script>
}